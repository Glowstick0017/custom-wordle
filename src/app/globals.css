@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom base styles */
html {
  -webkit-text-size-adjust: 100%;
  -webkit-tap-highlight-color: transparent;
}

body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  touch-action: manipulation;
  /* Simplified static gradient background for better performance */
  background: linear-gradient(135deg, 
    #0a0a0a 0%, 
    #1a0d1a 25%, 
    #0d1a0d 50%, 
    #0d0d1a 75%, 
    #1a0d0d 100%);
  background-attachment: fixed;
  min-height: 100vh;
  /* Remove expensive animation */
}

/* Prevent zoom on inputs on mobile */
input, select, textarea {
  font-size: 16px;
}

/* Improve touch targets */
button, [role="button"] {
  min-height: 44px;
  min-width: 44px;
}

/* Enhanced touch for keyboard */
.keyboard-key {
  min-height: 48px;
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
}

/* Mobile-specific keyboard improvements */
@media (max-width: 640px) {
  .keyboard-key {
    min-height: 52px;
    min-width: 32px;
  }
}

/* Improve button touch feedback */
.keyboard-key:active {
  transform: scale(0.95);
  transition: transform 0.1s ease;
}

/* Prevent text selection on keyboard */
.keyboard-container {
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

/* Game board scrolling */
.game-board-scroll {
  scrollbar-width: thin;
  scrollbar-color: #475569 #1e293b;
}

.game-board-scroll::-webkit-scrollbar {
  width: 4px;
  height: 4px;
}

.game-board-scroll::-webkit-scrollbar-track {
  background: #1e293b;
  border-radius: 2px;
}

.game-board-scroll::-webkit-scrollbar-thumb {
  background: #475569;
  border-radius: 2px;
}

.game-board-scroll::-webkit-scrollbar-thumb:hover {
  background: #64748b;
}

/* Simplified gradient effects */
.gradient-text {
  background: linear-gradient(135deg, #10b981, #f97316, #8b5cf6);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  /* Removed expensive animation */
}


/* Glass morphism effects - optimized */
.glass-card {
  background: rgba(255, 255, 255, 0.08);
  /* Removed backdrop-filter for performance */
  border: 1px solid rgba(255, 255, 255, 0.15);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card-hover:hover {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
}

/* Gradient button styles - optimized */
.btn-gradient-primary {
  background: linear-gradient(135deg, #10b981, #059669);
  box-shadow: 0 4px 20px rgba(16, 185, 129, 0.3);
}

.btn-gradient-primary:hover {
  background: linear-gradient(135deg, #059669, #047857);
  box-shadow: 0 6px 25px rgba(16, 185, 129, 0.4);
}

.btn-gradient-secondary {
  background: linear-gradient(135deg, #8b5cf6, #7c3aed);
  box-shadow: 0 4px 20px rgba(139, 92, 246, 0.3);
}

.btn-gradient-secondary:hover {
  background: linear-gradient(135deg, #7c3aed, #6d28d9);
  box-shadow: 0 6px 25px rgba(139, 92, 246, 0.4);
}

.btn-gradient-accent {
  background: linear-gradient(135deg, #f97316, #ea580c);
  box-shadow: 0 4px 20px rgba(249, 115, 22, 0.3);
}

.btn-gradient-accent:hover {
  background: linear-gradient(135deg, #ea580c, #dc2626);
  box-shadow: 0 6px 25px rgba(249, 115, 22, 0.4);
}

/* Static border gradient */
.border-gradient {
  position: relative;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 12px;
  border: 2px solid rgba(16, 185, 129, 0.3);
}

/* Removed animated version for performance */

/* Custom scrollbar for webkit browsers */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: #1e293b;
}

::-webkit-scrollbar-thumb {
  background: #475569;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #64748b;
}

/* Mobile viewport fixes */
@supports (height: 100dvh) {
  .h-screen {
    height: 100dvh;
  }
  .min-h-screen {
    min-height: 100dvh;
  }
}

/* Prevent horizontal overflow on mobile */
html, body {
  overflow-x: hidden;
  max-width: 100vw;
}

/* Enhanced mobile keyboard styling */
@media (max-width: 640px) {
  .keyboard-container {
    padding-bottom: max(8px, env(safe-area-inset-bottom));
  }
  
  .keyboard-key {
    min-height: 40px;
    font-size: 0.75rem;
  }
  
  /* Accessibility mode mobile keyboard adjustments */
  .accessibility-mode .keyboard-key {
    min-width: 28px !important;
    min-height: 44px !important;
    font-size: 0.875rem !important;
  }
  
  .accessibility-mode .keyboard-container {
    padding: 0.5rem !important;
  }
  
  /* Compact header for mobile */
  header {
    min-height: auto !important;
  }
  
  /* Remove blur for mobile performance */
  .glass-card {
    backdrop-filter: none;
  }
  
  /* Hide gradient orbs on mobile for performance */
  .absolute.bg-gradient-to-r {
    display: none;
  }
}

/* Dark theme improvements */
@media (prefers-color-scheme: dark) {
  .glass-card {
    background: rgba(255, 255, 255, 0.08);
  }
}

/* Safe area utilities */
.pb-safe {
  padding-bottom: max(8px, env(safe-area-inset-bottom));
}

.pt-safe {
  padding-top: env(safe-area-inset-top);
}

.pl-safe {
  padding-left: env(safe-area-inset-left);
}

.pr-safe {
  padding-right: env(safe-area-inset-right);
}

/* =====================================
   ACCESSIBILITY MODE STYLES (WCAG AA)
   ===================================== */

/* When accessibility mode is enabled, remove animations but preserve essential functionality */
.accessibility-mode *:not(.fixed):not([role="dialog"]):not([data-preserve-transitions]) {
  animation: none !important;
  transition: none !important;
}

.accessibility-mode .animate-pulse,
.accessibility-mode .animate-spin,
.accessibility-mode .bg-gradient-animated,
.accessibility-mode .gradient-text {
  animation: none !important;
}

/* Remove gradient animations and background movement */
.accessibility-mode .gradient-text {
  background: none !important;
  -webkit-background-clip: unset !important;
  background-clip: unset !important;
  -webkit-text-fill-color: unset !important;
  color: #ffffff !important;
}

.accessibility-mode .bg-gradient-animated {
  animation: none !important;
}

.accessibility-mode body {
  background: #1a1a1a !important;
  background-image: none !important;
  background-attachment: unset !important;
  background-size: auto !important;
  animation: none !important;
}

/* Remove moving gradient backgrounds completely - multiple aggressive approaches */
.accessibility-mode .gradient-bg-layer {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}

/* Target specific background layers by ID */
.accessibility-mode #bg-layer-1,
.accessibility-mode #bg-layer-2 {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}

/* Target all fixed gradient backgrounds except modals */
.accessibility-mode .fixed.inset-0:not(.z-\[100\]):not([role="dialog"]) {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}

/* Target specific gradient background classes */
.accessibility-mode div[class*="bg-gradient"] {
  background: transparent !important;
  background-image: none !important;
  animation: none !important;
  display: none !important;
}

/* Force override any gradient backgrounds on fixed elements */
.accessibility-mode .fixed[class*="bg-gradient"] {
  background: transparent !important;
  background-image: none !important;
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}

/* Nuclear option - target by specific classes */
.accessibility-mode .bg-gradient-to-br {
  background: transparent !important;
  background-image: none !important;
  display: none !important;
}

/* High contrast colors for WCAG AA compliance (4.5:1 ratio minimum) */
.accessibility-mode .glass-card {
  background: rgba(255, 255, 255, 0.12) !important;
  border: 2px solid rgba(255, 255, 255, 0.3) !important;
  backdrop-filter: none !important;
}

.accessibility-mode .glass-card-hover:hover {
  background: rgba(255, 255, 255, 0.18) !important;
  border-color: rgba(255, 255, 255, 0.5) !important;
  transform: none !important;
}

/* Button styles with high contrast */
.accessibility-mode .btn-gradient-primary {
  background: #059669 !important; /* Dark green with 4.5:1 contrast */
  box-shadow: none !important;
}

.accessibility-mode .btn-gradient-primary:hover {
  background: #047857 !important;
  transform: none !important;
  box-shadow: none !important;
}

.accessibility-mode .btn-gradient-secondary {
  background: #7c3aed !important; /* Dark purple with 4.5:1 contrast */
  box-shadow: none !important;
}

.accessibility-mode .btn-gradient-secondary:hover {
  background: #6d28d9 !important;
  transform: none !important;
  box-shadow: none !important;
}

.accessibility-mode .btn-gradient-accent {
  background: #ea580c !important; /* Dark orange with 4.5:1 contrast */
  box-shadow: none !important;
}

.accessibility-mode .btn-gradient-accent:hover {
  background: #dc2626 !important;
  transform: none !important;
  box-shadow: none !important;
}

/* Remove all transform effects and shadows */
.accessibility-mode button {
  transform: none !important;
  box-shadow: none !important;
}

.accessibility-mode button:hover {
  transform: none !important;
  box-shadow: none !important;
}

.accessibility-mode button:active {
  transform: none !important;
}

/* Ensure text meets WCAG AA standards */
.accessibility-mode {
  color: #ffffff !important;
}

.accessibility-mode .text-white\/80 {
  color: rgba(255, 255, 255, 0.9) !important; /* Improved contrast */
}

.accessibility-mode .text-white\/60 {
  color: rgba(255, 255, 255, 0.8) !important; /* Improved contrast */
}

.accessibility-mode .text-white\/40 {
  color: rgba(255, 255, 255, 0.7) !important; /* Improved contrast */
}

/* Remove all blur effects */
.accessibility-mode * {
  backdrop-filter: none !important;
  filter: none !important;
}

/* Remove gradient borders */
.accessibility-mode .border-gradient::before,
.accessibility-mode .border-gradient-animated::before {
  display: none !important;
}

.accessibility-mode .border-gradient,
.accessibility-mode .border-gradient-animated {
  border: 2px solid rgba(255, 255, 255, 0.3) !important;
}

/* Enhanced focus indicators for keyboard navigation */
.accessibility-mode button:focus,
.accessibility-mode input:focus,
.accessibility-mode [role="button"]:focus {
  outline: 3px solid #ffffff !important;
  outline-offset: 2px !important;
}

/* Ensure all interactive elements have sufficient size (44px minimum) */
.accessibility-mode button,
.accessibility-mode [role="button"] {
  min-height: 44px !important;
  min-width: 44px !important;
}

/* These are already handled above */

/* Simplified loading spinner for accessibility mode */
.accessibility-mode .animate-spin {
  border: 4px solid rgba(255, 255, 255, 0.3) !important;
  border-top: 4px solid #ffffff !important;
  animation: accessibility-spin 1s linear infinite !important;
}

@keyframes accessibility-spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* High contrast keyboard key styles - only apply to unused keys */
.accessibility-mode .keyboard-key:not([data-key-state]) {
  border: 2px solid rgba(255, 255, 255, 0.4) !important;
  background: rgba(255, 255, 255, 0.1) !important;
  color: #ffffff !important;
}

.accessibility-mode .keyboard-key:not([data-key-state]):hover {
  background: rgba(255, 255, 255, 0.2) !important;
  border-color: rgba(255, 255, 255, 0.6) !important;
  transform: none !important;
}

/* Ensure keyboard keys with states keep their colors */
.accessibility-mode .keyboard-key[data-key-state] {
  transform: none !important;
  box-shadow: none !important;
}

/* Ensure modals are always visible in accessibility mode */
.accessibility-mode [role="dialog"] {
  display: flex !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Remove all drop shadows and gradients from layout - handled above */
